name: self-hosted
run-name: sh
on:
  workflow_dispatch:
jobs:
  test:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v3
      - name: build
        run: sudo docker compose build 
      - name: run containers
        run:  sudo docker compose up -d
      - name: docker ps
        run: sudo docker ps
      - name: test frontend
        run: sleep 10 && curl localhost:3000
      - name: test backend
        run: sleep 5 && curl localhost:88 -vvv
      - run: sudo docker compose down
        
